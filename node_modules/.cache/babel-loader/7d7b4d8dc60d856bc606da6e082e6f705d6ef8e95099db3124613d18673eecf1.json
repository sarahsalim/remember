{"ast":null,"code":"import React,{useState,useEffect}from\"react\";import Modal from\"react-modal\";import{useUser,useSupabaseClient}from\"@supabase/auth-helpers-react\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";const customStyles={content:{top:\"50%\",left:\"50%\",transform:\"translate(-50%, -50%)\",width:\"fit-content\",borderRadius:\"8px\",height:\"fit-content\",padding:\"20px\"},overlay:{backgroundColor:\"rgba(0, 0, 0, 0.7)\"}};const CreatePhotoModal=_ref=>{let{setImages}=_ref;const user=useUser();const supabase=useSupabaseClient();const[modalIsOpen,setIsOpen]=useState(false);const[file,setFile]=useState(\"\");const[name,setName]=useState(\"\");const[form,setForm]=useState(true);const openModal=()=>{setIsOpen(true);};function closeModal(){setIsOpen(false);setName(\"\");setForm(true);setFile(\"\");}const handleChange=event=>{setFile(event);};const handleChangeName=event=>{setName(event.target.value);if(name.length>0&&file){setForm(false);}else{setForm(true);}};const handleClick=()=>{uploadImage(file);closeModal();};useEffect(()=>{if(user){getImages();}},[user]);async function getImages(){const{data,error}=await supabase.storage.from(\"images\").list((user===null||user===void 0?void 0:user.id)+\"/\",{limit:100,offset:0,sortBy:{column:\"created_at\",order:\"desc\"}});if(data!==null){setImages(data);}else{console.log(error);}}async function uploadImage(ev){let file=ev.target.files[0];const{data,error}=await supabase.storage.from(\"images\").upload(user.id+\"/\"+name,file);if(data){getImages();}else{console.log(error);}}return/*#__PURE__*/_jsxs(\"div\",{style:{display:\"flex\",alignItems:\"center\",justifyContent:\"center\",paddingBottom:\"32px\"},children:[/*#__PURE__*/_jsx(\"button\",{className:\"btn default\",onClick:openModal,children:\"Share a memory\"}),/*#__PURE__*/_jsxs(Modal,{isOpen:modalIsOpen,onRequestClose:closeModal,style:customStyles,contentLabel:\"Example Modal\",children:[/*#__PURE__*/_jsxs(\"div\",{style:{display:\"flex\",width:\"100%\",justifyContent:\"space-between\",marginBottom:\"16px\"},children:[/*#__PURE__*/_jsx(\"h2\",{className:\"first-header-text\",style:{margin:0},children:\"Share a memory\"}),/*#__PURE__*/_jsx(\"button\",{onClick:closeModal,className:\"close\",children:\"\\xD7\"})]}),/*#__PURE__*/_jsxs(\"form\",{style:{display:\"flex\",flexDirection:\"column\",gap:\"8px\"},children:[/*#__PURE__*/_jsx(\"input\",{type:\"file\",onChange:e=>handleChange(e)}),/*#__PURE__*/_jsx(\"p\",{className:\"helper-text\",children:/*#__PURE__*/_jsx(\"span\",{children:\"Only JPEG images less than 50MB in size\"})}),/*#__PURE__*/_jsx(\"label\",{for:\"textInput\",children:\"Describe the special moment\"}),/*#__PURE__*/_jsx(\"input\",{onChange:e=>handleChangeName(e),type:\"text\",value:name,className:\"input-field\",id:\"textInput\"}),/*#__PURE__*/_jsx(\"p\",{className:\"helper-text\",children:/*#__PURE__*/_jsx(\"span\",{children:\"Sadly no unique characters and emojis \\uD83D\\uDE1E\"})}),/*#__PURE__*/_jsx(\"button\",{className:\"btn default upload\",disabled:form,onClick:()=>{handleClick();},children:\"Upload photo\"})]})]})]});};export default CreatePhotoModal;","map":{"version":3,"names":["React","useState","useEffect","Modal","useUser","useSupabaseClient","jsx","_jsx","jsxs","_jsxs","customStyles","content","top","left","transform","width","borderRadius","height","padding","overlay","backgroundColor","CreatePhotoModal","_ref","setImages","user","supabase","modalIsOpen","setIsOpen","file","setFile","name","setName","form","setForm","openModal","closeModal","handleChange","event","handleChangeName","target","value","length","handleClick","uploadImage","getImages","data","error","storage","from","list","id","limit","offset","sortBy","column","order","console","log","ev","files","upload","style","display","alignItems","justifyContent","paddingBottom","children","className","onClick","isOpen","onRequestClose","contentLabel","marginBottom","margin","flexDirection","gap","type","onChange","e","for","disabled"],"sources":["/Users/sarahsalim/Desktop/remember-new/src/components/Modal.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport Modal from \"react-modal\";\nimport { useUser, useSupabaseClient } from \"@supabase/auth-helpers-react\";\n\nconst customStyles = {\n  content: {\n    top: \"50%\",\n    left: \"50%\",\n    transform: \"translate(-50%, -50%)\",\n    width: \"fit-content\",\n    borderRadius: \"8px\",\n    height: \"fit-content\",\n    padding: \"20px\",\n  },\n  overlay: {\n    backgroundColor: \"rgba(0, 0, 0, 0.7)\",\n  },\n};\n\nconst CreatePhotoModal = ({ setImages }) => {\n  const user = useUser();\n  const supabase = useSupabaseClient();\n  const [modalIsOpen, setIsOpen] = useState(false);\n  const [file, setFile] = useState(\"\");\n  const [name, setName] = useState(\"\");\n  const [form, setForm] = useState(true);\n\n  const openModal = () => {\n    setIsOpen(true);\n  };\n\n  function closeModal() {\n    setIsOpen(false);\n    setName(\"\");\n    setForm(true);\n    setFile(\"\");\n  }\n\n  const handleChange = (event) => {\n    setFile(event);\n  };\n\n  const handleChangeName = (event) => {\n    setName(event.target.value);\n    if (name.length > 0 && file) {\n      setForm(false);\n    } else {\n      setForm(true);\n    }\n  };\n\n  const handleClick = () => {\n    uploadImage(file);\n    closeModal();\n  };\n\n  useEffect(() => {\n    if (user) {\n      getImages();\n    }\n  }, [user]);\n\n  async function getImages() {\n    const { data, error } = await supabase.storage\n      .from(\"images\")\n      .list(user?.id + \"/\", {\n        limit: 100,\n        offset: 0,\n        sortBy: { column: \"created_at\", order: \"desc\" },\n      });\n\n    if (data !== null) {\n      setImages(data);\n    } else {\n      console.log(error);\n    }\n  }\n\n  async function uploadImage(ev) {\n    let file = ev.target.files[0];\n\n    const { data, error } = await supabase.storage\n      .from(\"images\")\n      .upload(user.id + \"/\" + name, file);\n\n    if (data) {\n      getImages();\n    } else {\n      console.log(error);\n    }\n  }\n\n  return (\n    <div\n      style={{\n        display: \"flex\",\n        alignItems: \"center\",\n        justifyContent: \"center\",\n        paddingBottom: \"32px\",\n      }}\n    >\n      <button className=\"btn default\" onClick={openModal}>\n        Share a memory\n      </button>\n      <Modal\n        isOpen={modalIsOpen}\n        onRequestClose={closeModal}\n        style={customStyles}\n        contentLabel=\"Example Modal\"\n      >\n        <div\n          style={{\n            display: \"flex\",\n            width: \"100%\",\n            justifyContent: \"space-between\",\n            marginBottom: \"16px\",\n          }}\n        >\n          <h2 className=\"first-header-text\" style={{ margin: 0 }}>\n            Share a memory\n          </h2>\n          <button onClick={closeModal} className=\"close\">\n            &times;\n          </button>\n        </div>\n\n        <form style={{ display: \"flex\", flexDirection: \"column\", gap: \"8px\" }}>\n          <input type=\"file\" onChange={(e) => handleChange(e)} />\n          <p className=\"helper-text\">\n            <span>Only JPEG images less than 50MB in size</span>\n          </p>\n          <label for=\"textInput\">Describe the special moment</label>\n          <input\n            onChange={(e) => handleChangeName(e)}\n            type=\"text\"\n            value={name}\n            className=\"input-field\"\n            id=\"textInput\"\n          ></input>\n          <p className=\"helper-text\">\n            <span>Sadly no unique characters and emojis ðŸ˜ž</span>\n          </p>\n          <button\n            className=\"btn default upload\"\n            disabled={form}\n            onClick={() => {\n              handleClick();\n            }}\n          >\n            Upload photo\n          </button>\n        </form>\n      </Modal>\n    </div>\n  );\n};\n\nexport default CreatePhotoModal;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}